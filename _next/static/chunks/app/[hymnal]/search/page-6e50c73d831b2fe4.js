(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{7875:function(e,s,t){Promise.resolve().then(t.bind(t,8384))},8384:function(e,s,t){"use strict";t.d(s,{default:function(){return l}});var r=t(8980),a=t(2208),n=t(9211),i=t(8859),c=t(1294);function l(e){let{params:s}=e,t=(0,n.useSearchParams)().get("q")||"",[l,m]=(0,a.useState)(void 0),[h,d]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[y,u]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{let e=await (0,c.Cv)();m(e);let r=Object.values(e.hymnals).find(e=>e.url_slug===s.hymnal);if(!r){(0,n.notFound)();return}if(g(r),t.trim()){u(!0);try{let e=await (0,c.Py)(t.trim(),r.id,50);d(e)}catch(e){console.error("Search failed:",e),d([])}finally{u(!1)}}}catch(e){console.error("Failed to load data:",e)}finally{x(!1)}})()},[s.hymnal,t]),o)?(0,r.jsx)(i.Z,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading search..."})]})})}):(p||(0,n.notFound)(),(0,r.jsxs)(i.Z,{hymnalReferences:l,children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-8 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold tracking-tight text-white sm:text-5xl",children:["Search ",p.site_name]}),(0,r.jsx)("p",{className:"mt-6 text-lg leading-8 text-primary-100",children:t?'Results for "'.concat(t,'"'):"Search through this hymnal collection"})]})})}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-8 lg:px-8",children:y?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Searching..."})]})}):t?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Found ",h.length," result",1!==h.length?"s":"",' for "',t,'"']})}),0===h.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"No hymns found matching your search."}),(0,r.jsx)("p",{className:"text-gray-400 mt-2",children:"Try a different search term."})]}):(0,r.jsx)("div",{className:"grid gap-4",children:h.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:(0,r.jsxs)("a",{href:"/".concat(s.hymnal,"/").concat(e.hymn.slug||"hymn-".concat(e.hymn.number,"-").concat(e.hymn.title.toLowerCase().replace(/[^a-z0-9]+/g,"-"))),className:"hover:text-primary-600 transition-colors",children:["#",e.hymn.number," - ",e.hymn.title]})}),e.hymn.author&&(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:["Author: ",e.hymn.author]}),e.hymn.composer&&(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:["Composer: ",e.hymn.composer]}),e.hymn.first_line&&(0,r.jsxs)("p",{className:"text-gray-500 italic",children:['"',e.hymn.first_line,'"']})]}),(0,r.jsxs)("div",{className:"ml-4 flex space-x-2",children:[(0,r.jsx)("a",{href:"/".concat(s.hymnal,"/").concat(e.hymn.slug||"hymn-".concat(e.hymn.number,"-").concat(e.hymn.title.toLowerCase().replace(/[^a-z0-9]+/g,"-"))),className:"inline-flex items-center px-3 py-1 border border-primary-300 text-sm font-medium rounded-md text-primary-700 bg-primary-50 hover:bg-primary-100 transition-colors",children:"View"}),(0,r.jsx)("a",{href:"/projection/".concat(e.hymn.id),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Project"})]})]})},e.hymn.id))})]}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Enter a search term to find hymns in this collection."})})})})]}))}}},function(e){e.O(0,[795,222,791,414,14,512,744],function(){return e(e.s=7875)}),_N_E=e.O()}]);