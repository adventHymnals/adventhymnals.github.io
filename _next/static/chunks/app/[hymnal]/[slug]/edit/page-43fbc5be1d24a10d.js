(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{7401:function(e,t,r){Promise.resolve().then(r.bind(r,6912))},6912:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(8980),n=r(2208),s=r(3367),l=r(8967),o=r(1474);let i=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),c=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}),d=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});var u=r(6870);let m=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))});function h(){return(0,a.jsx)("button",{onClick:()=>{window.opener?window.close():window.history.back()},className:"inline-flex items-center px-3 py-2 bg-white/10 text-white border border-white/20 hover:bg-white/20 rounded-lg font-medium transition-colors duration-200 text-sm",children:"Close"})}function x(e){let{hymn:t,hymnalRef:r,allHymns:x,params:g}=e,[p,f]=(0,n.useState)(0),[y,b]=(0,n.useState)(0),[v,j]=(0,n.useState)([]),[w,N]=(0,n.useState)(new Set),[k,C]=(0,n.useState)(null),[E,S]=(0,n.useState)(!1),[H,L]=(0,n.useState)(null),[F,_]=(0,n.useState)(""),[A,D]=(0,n.useState)(t),[M,Z]=(0,n.useState)(null),[O,B]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=x.findIndex(e=>e.number===t.number);f(e>=0?e:0)},[t.number,x]),(0,n.useEffect)(()=>{(async()=>{try{let e=[],a=700;"CH1941"===r.id&&(a=633),"CS1900"===r.id&&(a=322);for(let t=1;t<=a;t++)e.push(t);j(e);let n=Math.max(1,t.number-5),s=e.findIndex(e=>e>=n);b(s>=0?s:0)}catch(e){console.error("Error loading images:",e)}})()},[r.id,t.number]);let P=e=>({SDAH:{padding:3,includeUnpadded:!0},CH1941:{padding:3},CS1900:{prefix:"page-",padding:3},HGPP:{prefix:"page-",padding:2},HSAB:{padding:0}})[e]||{padding:3},I=(e,t)=>{let r=P(t),a=[],n="https://media.adventhymnals.org/images/".concat(t);if(0===r.padding){let t="".concat(r.prefix||"").concat(e);a.push("".concat(n,"/").concat(t,".png"),"".concat(n,"/").concat(t,".jpg"))}else{let t=e.toString().padStart(r.padding,"0"),s="".concat(r.prefix||"").concat(t);if(a.push("".concat(n,"/").concat(s,".png"),"".concat(n,"/").concat(s,".jpg")),r.includeUnpadded){let t="".concat(r.prefix||"").concat(e);a.push("".concat(n,"/").concat(t,".png"),"".concat(n,"/").concat(t,".jpg"))}}return a};(0,n.useEffect)(()=>{let e=R();e.length>0?(Z(e[0]),B(0)):Z(null)},[y,r.id]);let R=()=>0===v.length?[]:I(v[y],r.id),W=e=>{let t=p;if("prev"===e&&p>0?t=p-1:"next"===e&&p<x.length-1&&(t=p+1),t!==p){let e=x[t],r=function(e,t){let r=t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();return"hymn-".concat(e,"-").concat(r)}(e.number,e.title);window.location.href="/".concat(g.hymnal,"/").concat(r,"/edit")}},K=e=>{"prev"===e&&y>0?b(y-1):"next"===e&&y<v.length-1&&b(y+1)},T=(e,t)=>{C(e),_(t),L(null),S(!1)},z=e=>{S(!0),_(e),L(null),C(null)},V=(e,t)=>{L(e),_(t||""),C(null),S(!1)},U=()=>{let e={...A};if(null!==k){let t=e.verses.findIndex(e=>e.number===k);t>=0&&(e.verses[t].text=F)}else E?e.chorus&&(e.chorus.text=F):H&&(e[H]=F);D(e),console.log("Saving edit:",{field:H,verseNumber:k,isChorus:E,newText:F}),G()},G=()=>{C(null),S(!1),L(null),_("")},Q=e=>{let t={...A},r=e?e+1:t.verses.length+1;e&&t.verses.forEach(e=>{e.number>=r&&(e.number+=1)});let a={number:r,text:"New verse text..."};t.verses.push(a),t.verses.sort((e,t)=>e.number-t.number),D(t),T(r,a.text)},q=e=>{let t={...A};t.verses=t.verses.filter(t=>t.number!==e),t.verses.forEach((e,t)=>{e.number=t+1}),D(t)},J=e=>{"Enter"===e.key&&e.ctrlKey?U():"Escape"===e.key&&G()},X=0===v.length?"":v[y];return(0,a.jsxs)("div",{className:"h-screen flex gap-4 p-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-1/2 bg-white rounded-xl shadow-sm border flex flex-col h-full overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Edit Hymn"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>W("prev"),disabled:0===p,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous hymn",children:(0,a.jsx)(s.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 px-3",children:[p+1," of ",x.length]}),(0,a.jsx)("button",{onClick:()=>W("next"),disabled:p===x.length-1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next hymn",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(h,{})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e0 #f7fafc"},children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:["Hymn #",A.number," - Title"]}),"title"===H?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-2xl font-bold text-gray-900 border border-primary-300 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-2",children:[(0,a.jsx)("button",{onClick:U,className:"px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors",children:"Save"}),(0,a.jsx)("button",{onClick:G,className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}):(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors",onClick:()=>V("title",A.title),title:"Click to edit title",children:A.title})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Words"}),"author"===H?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-gray-600 border border-primary-300 rounded p-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-1",children:[(0,a.jsx)("button",{onClick:U,className:"px-2 py-1 bg-primary-600 text-white text-xs rounded",children:"Save"}),(0,a.jsx)("button",{onClick:G,className:"px-2 py-1 bg-gray-300 text-gray-700 text-xs rounded",children:"Cancel"})]})]}):(0,a.jsx)("div",{className:"text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors min-h-[2rem] flex items-center",onClick:()=>V("author",A.author),title:"Click to edit author",children:A.author||"Click to add author"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Music"}),"composer"===H?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-gray-600 border border-primary-300 rounded p-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-1",children:[(0,a.jsx)("button",{onClick:U,className:"px-2 py-1 bg-primary-600 text-white text-xs rounded",children:"Save"}),(0,a.jsx)("button",{onClick:G,className:"px-2 py-1 bg-gray-300 text-gray-700 text-xs rounded",children:"Cancel"})]})]}):(0,a.jsx)("div",{className:"text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors min-h-[2rem] flex items-center",onClick:()=>V("composer",A.composer),title:"Click to edit composer",children:A.composer||"Click to add composer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Tune"}),"tune"===H?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-gray-600 border border-primary-300 rounded p-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-1",children:[(0,a.jsx)("button",{onClick:U,className:"px-2 py-1 bg-primary-600 text-white text-xs rounded",children:"Save"}),(0,a.jsx)("button",{onClick:G,className:"px-2 py-1 bg-gray-300 text-gray-700 text-xs rounded",children:"Cancel"})]})]}):(0,a.jsx)("div",{className:"text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors min-h-[2rem] flex items-center",onClick:()=>V("tune",A.tune),title:"Click to edit tune",children:A.tune||"Click to add tune"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1 block",children:"Meter"}),"meter"===H?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-gray-600 border border-primary-300 rounded p-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-1",children:[(0,a.jsx)("button",{onClick:U,className:"px-2 py-1 bg-primary-600 text-white text-xs rounded",children:"Save"}),(0,a.jsx)("button",{onClick:G,className:"px-2 py-1 bg-gray-300 text-gray-700 text-xs rounded",children:"Cancel"})]})]}):(0,a.jsx)("div",{className:"text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors min-h-[2rem] flex items-center",onClick:()=>V("meter",A.meter),title:"Click to edit meter",children:A.meter||"Click to add meter"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[A.verses.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold text-primary-600",children:e.number})}),(0,a.jsx)("button",{onClick:()=>q(e.number),className:"absolute -right-2 -top-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Delete verse",children:(0,a.jsx)(o.Z,{className:"h-3 w-3"})}),(0,a.jsx)("div",{className:"ml-12 mr-8",children:k===e.number?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-lg leading-relaxed text-gray-800 font-serif border border-primary-300 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",rows:4,autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-2",children:[(0,a.jsx)("button",{onClick:U,className:"px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors",children:"Save (Ctrl+Enter)"}),(0,a.jsx)("button",{onClick:G,className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400 transition-colors",children:"Cancel (Esc)"})]})]}):(0,a.jsx)("div",{className:"text-lg leading-relaxed text-gray-800 whitespace-pre-line font-serif cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors",onClick:()=>T(e.number,e.text),title:"Click to edit this verse",children:e.text})}),(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsxs)("button",{onClick:()=>Q(e.number),className:"opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 flex items-center gap-1",title:"Add verse after this one",children:[(0,a.jsx)(i,{className:"h-3 w-3"}),"Add Verse"]})})]},e.number)),(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsxs)("button",{onClick:()=>Q(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(i,{className:"h-4 w-4"}),"Add New Verse"]})})]}),A.chorus?(0,a.jsxs)("div",{className:"relative mt-8 p-6 bg-primary-50 border-l-4 border-primary-500 rounded-r-lg group",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center -ml-6 mt-2",children:(0,a.jsx)("span",{className:"text-sm font-bold text-white",children:"C"})}),(0,a.jsx)("button",{onClick:()=>{let e={...A};delete e.chorus,D(e)},className:"absolute -right-2 -top-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Delete chorus",children:(0,a.jsx)(o.Z,{className:"h-3 w-3"})}),(0,a.jsxs)("div",{className:"ml-6 mr-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-primary-900 mb-2",children:"Chorus"}),E?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:F,onChange:e=>_(e.target.value),onKeyDown:J,className:"w-full text-lg leading-relaxed text-primary-800 font-serif border border-primary-300 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none bg-white",rows:4,autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-2",children:[(0,a.jsx)("button",{onClick:U,className:"px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors",children:"Save (Ctrl+Enter)"}),(0,a.jsx)("button",{onClick:G,className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400 transition-colors",children:"Cancel (Esc)"})]})]}):(0,a.jsx)("div",{className:"text-lg leading-relaxed text-primary-800 whitespace-pre-line font-serif cursor-pointer hover:bg-primary-100 p-2 rounded transition-colors",onClick:()=>z(A.chorus.text),title:"Click to edit the chorus",children:A.chorus.text})]})]}):(0,a.jsx)("div",{className:"flex justify-center mt-8",children:(0,a.jsxs)("button",{onClick:()=>{let e={...A};e.chorus||(e.chorus={text:"New chorus text..."},D(e),z(e.chorus.text))},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(i,{className:"h-4 w-4"}),"Add Chorus"]})})]})]}),(0,a.jsxs)("div",{className:"w-1/2 bg-white rounded-xl shadow-sm border flex flex-col h-full relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(c,{className:"h-5 w-5 mr-2"}),"Original Images"]}),(0,a.jsx)("span",{className:"text-sm text-gray-600 px-3",children:v.length>0?"Page ".concat(X):"Loading..."})]}),(0,a.jsxs)("div",{className:"flex-1 relative bg-gray-50",children:[(0,a.jsx)("div",{className:"h-full overflow-auto",children:M&&!w.has(v[y])?(0,a.jsx)("img",{src:M,alt:"".concat(r.name," page ").concat(X),className:"w-full h-auto object-contain min-h-full",onError:()=>{let e=R(),t=O+1;console.log("Image error for source ".concat(O,": ").concat(M)),t<e.length?(console.log("Trying fallback source ".concat(t,": ").concat(e[t])),B(t),Z(e[t])):(console.log("All ".concat(e.length," sources failed for image ").concat(v[y])),N(e=>new Set([...Array.from(e),v[y]])),Z(null))}}):w.has(v[y])?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-gray-500 p-8",children:[(0,a.jsx)(d,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Image not available"}),(0,a.jsxs)("p",{className:"text-sm",children:["Page ",X," could not be loaded from any source"]})]})}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-gray-500 p-8",children:[(0,a.jsx)(c,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No images available"}),(0,a.jsxs)("p",{className:"text-sm",children:["Images for ",r.name," are not currently available in the repository"]}),(0,a.jsxs)("p",{className:"text-xs mt-2 text-gray-400",children:["Current page: ",X]})]})})}),M&&!w.has(v[y])&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>K("prev"),disabled:0===y,className:"absolute left-0 top-1/2 transform -translate-y-1/2 p-3 bg-black/50 text-white rounded-r-full hover:bg-black/70 disabled:opacity-30 disabled:cursor-not-allowed transition-all z-10",title:"Previous image",children:(0,a.jsx)(u.Z,{className:"h-6 w-6"})}),(0,a.jsx)("button",{onClick:()=>K("next"),disabled:y===v.length-1,className:"absolute right-0 top-1/2 transform -translate-y-1/2 p-3 bg-black/50 text-white rounded-l-full hover:bg-black/70 disabled:opacity-30 disabled:cursor-not-allowed transition-all z-10",title:"Next image",children:(0,a.jsx)(m,{className:"h-6 w-6"})})]})]})]})]})}var g=r(1294);function p(e){let{params:t}=e,[r,s]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),[i,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[m,h]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{try{u(!0);let e=await (0,g.Cv)(),r=Object.values(e.hymnals).find(e=>e.url_slug===t.hymnal);if(!r){h("Hymnal not found");return}o(r);let a=function(e){let t=e.match(/^hymn-(\d+)-/);return t?parseInt(t[1],10):null}(t.slug);if(!a){h("Invalid hymn format");return}let n="".concat(r.id,"-").concat(r.language,"-").concat(a.toString().padStart(3,"0")),l=await (0,g.loadHymn)(n);if(!l){h("Hymn not found");return}s(l);let{hymns:i}=await (0,g.Q3)(r.id,1,1e3);c(i)}catch(e){console.error("Failed to load edit page data:",e),h("Failed to load hymn data")}finally{u(!1)}})()},[t.hymnal,t.slug]),d)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading hymn editor..."})]})}):!m&&r&&l?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)(x,{hymn:r,hymnalRef:l,allHymns:i,params:t})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-sm border p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-3",children:m||"Hymn Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The hymn you're looking for could not be loaded."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("a",{href:"/".concat(t.hymnal),className:"block w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:"Back to Hymnal"}),(0,a.jsx)("a",{href:"/",className:"block w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"Back to Home"})]})]})})}},1294:function(e,t,r){"use strict";r.d(t,{Cv:function(){return l},Py:function(){return c},Q3:function(){return i},kG:function(){return s},loadHymn:function(){return o}});let a=new Map,n="https://adventhymnals.org";function s(e){return n?"".concat(n).concat(e):e}async function l(){let e="hymnal-references";if(a.has(e))return a.get(e);try{let t=await fetch(s("/api/hymnals"));if(!t.ok)throw Error("Failed to fetch hymnal references");let r=await t.json();return a.set(e,r),r}catch(r){console.error("Failed to load hymnal references:",r);let t={hymnals:{SDAH:{id:"SDAH",name:"Seventh-day Adventist Hymnal",abbreviation:"SDAH",year:1985,total_songs:695,language:"en",language_name:"English",site_name:"Seventh-day Adventist Hymnal",url_slug:"seventh-day-adventist-hymnal"}},languages:{en:"English"},metadata:{total_hymnals:1,date_range:{earliest:1985,latest:1985},languages_supported:["en"],total_estimated_songs:695,source:"Fallback data",generated_date:new Date().toISOString().split("T")[0]}};return a.set(e,t),t}}async function o(e){let t="hymn-".concat(e);if(a.has(t))return a.get(t);try{let r=await fetch(s("/api/hymns/".concat(e)));if(!r.ok)return null;let n=await r.json();return a.set(t,n),n}catch(t){return console.warn("Failed to load hymn ".concat(e,":"),t),null}}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{let a=await fetch(s("/api/hymnals/".concat(e,"/hymns?page=").concat(t,"&limit=").concat(r)));if(!a.ok)return{hymns:[],total:0,totalPages:0};return await a.json()}catch(t){return console.warn("Failed to load hymns for hymnal ".concat(e,":"),t),{hymns:[],total:0,totalPages:0}}}async function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{let a=new URLSearchParams({q:e,limit:r.toString()});t&&a.append("hymnal",t);let n=await fetch(s("/api/search?".concat(a.toString())));if(!n.ok)return[];return await n.json()}catch(e){return console.warn("Failed to search hymns:",e),[]}}},6870:function(e,t,r){"use strict";var a=r(2208);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});t.Z=n},3367:function(e,t,r){"use strict";var a=r(2208);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))});t.Z=n},8967:function(e,t,r){"use strict";var a=r(2208);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});t.Z=n},1474:function(e,t,r){"use strict";var a=r(2208);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});t.Z=n}},function(e){e.O(0,[14,512,744],function(){return e(e.s=7401)}),_N_E=e.O()}]);